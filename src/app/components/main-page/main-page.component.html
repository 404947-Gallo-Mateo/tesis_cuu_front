<div class="container-fluid text-light" style="background-color: rgb(11, 11, 152);">
  <div class="container-fluid p-4 mb-2 bg-dark-blue">
    <div class="d-flex align-items-center">
      <h3 class="fw-bold mb-0">Disciplinas disponibles</h3>
    </div>
    <p class="text-light opacity-75 mt-2 mb-0">Mira todas nuestras categorías en un solo lugar</p>
  </div>

  <div class="row justify-content-center g-4 p-4" style="background-color: rgb(0, 0, 176);">
    @for (discipline of allDisciplines; track $index) {
      <!-- Contenedor principal con borde blanco -->
      <div class="col-12 border border-2 border-light rounded-4 p-3 mb-4 bg-dark-blue shadow-lg">
        <!-- Encabezado clickable -->
        <div 
          class="d-flex justify-content-between align-items-center p-3 rounded-3 mb-2 hover-grow" 
          style="cursor: pointer; background: linear-gradient(to right, rgba(255,255,255,0.1), rgba(255,255,255,0.05));"
          (click)="toggleDiscipline(discipline.id)"
        >
          <div class="d-flex align-items-center">
            <i class="bi bi-bookmark-star me-3 fs-4 text-info"></i>
            <h4 class="mb-0 fw-bold">{{ discipline.name }}</h4>
          </div>
          <div class="d-flex align-items-center">
            <span class="badge bg-info text-dark me-3">
              {{ discipline.categories.length }} categoría{{ discipline.categories.length !== 1 ? 's' : '' }}
            </span>
            <i 
              class="bi fs-3" 
              [class.bi-chevron-down]="isExpanded(discipline.id)" 
              [class.bi-chevron-right]="!isExpanded(discipline.id)"
            ></i>
          </div>
        </div>

        <p class="px-3 py-2 text-light opacity-85">{{ discipline.description }}</p>

        <!-- Contenido toggleable (categorías) -->
        <div 
          class="row g-4 mt-2 pt-3" 
          [class.collapse]="!isExpanded(discipline.id)"
          [class.show]="isExpanded(discipline.id)"
        >
          @for (category of discipline.categories; track $index) {
            <div class="col-12 col-md-6 col-lg-4 col-xl-3">
              <div
                class="card shadow-sm h-100 category-card"
                (click)="openModal(category); $event.stopPropagation()"
              >
                <div class="card-header bg-primary-blue text-white py-2">
                  <h5 class="card-title mb-0 d-flex justify-content-between align-items-center">
                    <span>{{ category.name }}</span>
                    <i class="bi bi-info-circle"></i>
                  </h5>
                </div>
                
                <div class="card-body bg-light-blue text-dark p-3">
                  <p class="text-truncate small mb-2">{{ category.description }}</p>
                  
                  <div class="d-flex justify-content-between small mb-1">
                    <span class="fw-medium">Edad:</span>
                    <span>{{ category.ageRange.minAge }}-{{ category.ageRange.maxAge }} años</span>
                  </div>
                  
                  <div class="d-flex justify-content-between small mb-1">
                    <span class="fw-medium">Vacantes:</span>
                    <span>
                      @if (category.availableSpaces > 0) {
                        {{ category.remainingSpaces }}/{{ category.availableSpaces }}
                      } @else {
                        Ilimitadas
                      }
                    </span>
                  </div>
                  
                  <div class="d-flex justify-content-between small">
                    <span class="fw-medium">Mensual:</span>
                    <span class="fw-bold">${{ category.monthlyFee }}</span>
                  </div>
                </div>
                
                <div class="card-footer bg-light-blue border-0 py-2">
                  <div class="d-flex justify-content-between align-items-center small">
                    <span class="badge bg-info text-dark">
                      {{ translateAllowedGenre(category.allowedGenre) }}
                    </span>
                    <span class="text-primary fw-medium">Ver detalles</span>
                  </div>
                </div>
              </div>
            </div>
          }
        </div>
      </div>
    }
  </div>

  <app-inscription-to-category 
    [category]="selectedCategory!"
    [show]="showModal"
    (close)="closeModal()"
  />
</div>